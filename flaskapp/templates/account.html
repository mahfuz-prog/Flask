{% from 'templates.html' import field_template_single %}
{% extends 'layout.html' %}
{% block body_block %}
<div class='bg-dark p-5' style="border-radius: 5px;">
	<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Windows_10_Default_Profile_Picture.svg/2048px-Windows_10_Default_Profile_Picture.svg.png" width="100" height="100">
	<h4 class='mt-3 text-white'>Email: {{ current_user.email }}</h4>
	<div class="col-6 mt-3">
		<form method="POST">
			{{ change_username_form.hidden_tag() }}
			<div class="input-group mb-3">
			  <input type="text" class="form-control" value="{{ current_user.username }}" readonly>
			  {{ field_template_single(change_username_form.username, placeholder=change_username_form.username.label.text) }}
			  {{ change_username_form.submit_name(class="btn btn-outline-primary") }}	  			  
			</div>
		</form>
	</div>
	<div class="col-6 mt-3">
		<form method="POST">
			{{ change_pass_form.hidden_tag() }}
			<div class="input-group mb-3">
			  {{ field_template_single(change_pass_form.old_password, placeholder=change_pass_form.old_password.label.text) }}
			  {{ field_template_single(change_pass_form.password, placeholder=change_pass_form.password.label.text) }}
			  {{ change_pass_form.submit_pass(class="btn btn-outline-primary") }}
			</div>
		</form>
	</div>
</div>
<div class='bg-dark p-5 mt-3' style="border-radius: 5px;">
	<div class="container mb-2"><a href="{{ url_for('posts.new_post') }}" class="btn btn-outline-primary">Add new post</a></div>
	{% if current_user.posts == [] %}
	<p class="text-white">There is no post</p>
	{% else %}
	{% for post in current_user.posts %}
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
         <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <li><a href="{{ url_for('posts.read', post_id=post.id, title=post.title.replace(' ', '-')) }}" class="nav-link px-2 text-white">Title: {{ post.title }}</a></li>
          <li><a href="{{ url_for('posts.read', post_id=post.id, title=post.title.replace(' ', '-')) }}" class="nav-link px-2 text-white"></a></li>
          <li><a href="{{ url_for('posts.read', post_id=post.id, title=post.title.replace(' ', '-')) }}" class="nav-link px-2 text-white">Date: {{ post.date_posted.strftime('%Y-%m-%d') }}</a></li>
        </ul>

        <div class="text-end">
        	<a href="{{ url_for('posts.edit_post', post_id=post.id) }}" class="btn btn-outline-light me-2">Edit</a>
	        <a href="{{ url_for('posts.delete_post', post_id=post.id) }}" class="btn btn-danger">Delete</a>
        </div>
      </div>
      <div class="border-bottom mt-2 mb-2"></div>
    </div>
    {% endfor %}
    {% endif %}
</div>
{% endblock %}